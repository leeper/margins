<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Conditional predicted value and average marginal effect plots for models — cplot • margins</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Conditional predicted value and average marginal effect plots for models — cplot" />

<meta property="og:description" content="Draw one or more conditioanl effects plots reflecting predictions or marginal effects from a model, conditional on a covariate. Currently methods exist for &#8220;lm&#8221;, &#8220;glm&#8221;, &#8220;loess&#8221; class models." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">margins</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.23</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">An Introduction to 'margins'</a>
    </li>
    <li>
      <a href="../articles/Stata.html">Comparison with Stata's 'margins' command</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leeper/margins">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Conditional predicted value and average marginal effect plots for models</h1>
    <small class="dont-index">Source: <a href='https://github.com/leeper/margins/blob/master/R/cplot.R'><code>R/cplot.R</code></a>, <a href='https://github.com/leeper/margins/blob/master/R/cplot_clm.R'><code>R/cplot_clm.R</code></a>, <a href='https://github.com/leeper/margins/blob/master/R/cplot_glm.R'><code>R/cplot_glm.R</code></a>, and 3 more</small>
    <div class="hidden name"><code>cplot.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Draw one or more conditioanl effects plots reflecting predictions or marginal effects from a model, conditional on a covariate. Currently methods exist for &#8220;lm&#8221;, &#8220;glm&#8221;, &#8220;loess&#8221; class models.</p>
    
    </div>

    <pre class="usage"><span class='fu'>cplot</span>(<span class='no'>object</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>cplot</span>(<span class='no'>object</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='fu'>terms</span>(<span class='no'>object</span>))<span class='kw'>[[</span><span class='st'>"term.labels"</span>]][<span class='fl'>1L</span>],
  <span class='kw'>dx</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>, <span class='st'>"effect"</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>object</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>object</span>), <span class='no'>at</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>25L</span>,
  <span class='kw'>xvals</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/seq_range'>seq_range</a></span>(<span class='no'>data</span><span class='kw'>[[</span><span class='no'>x</span>]], <span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>) <span class='kw'>==</span> <span class='st'>"prediction"</span>)
  <span class='fu'>paste0</span>(<span class='st'>"Predicted value"</span>) <span class='kw'>else</span> <span class='fu'>paste0</span>(<span class='st'>"Marginal effect of "</span>, <span class='no'>dx</span>),
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"black"</span>, <span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>se.type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"shade"</span>, <span class='st'>"lines"</span>, <span class='st'>"none"</span>), <span class='kw'>se.col</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>se.fill</span> <span class='kw'>=</span> <span class='kw pkg'>grDevices</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/grDevices/topics/gray'>gray</a></span>(<span class='fl'>0.5</span>, <span class='fl'>0.5</span>), <span class='kw'>se.lwd</span> <span class='kw'>=</span> <span class='no'>lwd</span>, <span class='kw'>se.lty</span> <span class='kw'>=</span> <span class='kw'>if</span>
  (<span class='fu'>match.arg</span>(<span class='no'>se.type</span>) <span class='kw'>==</span> <span class='st'>"lines"</span>) <span class='fl'>1L</span> <span class='kw'>else</span> <span class='fl'>0L</span>, <span class='kw'>factor.lty</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>factor.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>factor.col</span> <span class='kw'>=</span> <span class='no'>se.col</span>, <span class='kw'>factor.fill</span> <span class='kw'>=</span> <span class='no'>factor.col</span>,
  <span class='kw'>factor.cex</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>xaxs</span> <span class='kw'>=</span> <span class='st'>"i"</span>, <span class='kw'>yaxs</span> <span class='kw'>=</span> <span class='no'>xaxs</span>, <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>scatter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>scatter.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>scatter.col</span> <span class='kw'>=</span> <span class='no'>se.col</span>, <span class='kw'>scatter.bg</span> <span class='kw'>=</span> <span class='no'>scatter.col</span>,
  <span class='kw'>scatter.cex</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug.col</span> <span class='kw'>=</span> <span class='no'>col</span>, <span class='kw'>rug.size</span> <span class='kw'>=</span> -<span class='fl'>0.02</span>, <span class='no'>...</span>)

<span class='co'># S3 method for clm</span>
<span class='fu'>cplot</span>(<span class='no'>object</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='fu'>terms</span>(<span class='no'>object</span>))<span class='kw'>[[</span><span class='st'>"term.labels"</span>]][<span class='fl'>1L</span>], <span class='kw'>dx</span> <span class='kw'>=</span> <span class='no'>x</span>,
  <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>, <span class='st'>"classprediction"</span>, <span class='st'>"stackedprediction"</span>, <span class='st'>"effect"</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>object</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>object</span>), <span class='no'>at</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>25L</span>, <span class='kw'>xvals</span> <span class='kw'>=</span> <span class='fu'>seq_range</span>(<span class='no'>data</span><span class='kw'>[[</span><span class='no'>x</span>]], <span class='kw'>n</span>
  <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>)
  <span class='kw'>==</span> <span class='st'>"effect"</span>) <span class='fu'>paste0</span>(<span class='st'>"Marginal effect of "</span>, <span class='no'>dx</span>) <span class='kw'>else</span> <span class='fu'>paste0</span>(<span class='st'>"Predicted value"</span>),
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>) <span class='kw'>%in%</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>,
  <span class='st'>"stackedprediction"</span>)) <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>1.04</span>) <span class='kw'>else</span> <span class='kw'>NULL</span>, <span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>factor.lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>factor.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>factor.col</span> <span class='kw'>=</span> <span class='no'>col</span>,
  <span class='kw'>factor.fill</span> <span class='kw'>=</span> <span class='no'>factor.col</span>, <span class='kw'>factor.cex</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>xaxs</span> <span class='kw'>=</span> <span class='st'>"i"</span>, <span class='kw'>yaxs</span> <span class='kw'>=</span> <span class='no'>xaxs</span>,
  <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>scatter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scatter.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>,
  <span class='kw'>scatter.col</span> <span class='kw'>=</span> <span class='no'>factor.col</span>, <span class='kw'>scatter.bg</span> <span class='kw'>=</span> <span class='no'>scatter.col</span>, <span class='kw'>scatter.cex</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
  <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug.col</span> <span class='kw'>=</span> <span class='no'>col</span>, <span class='kw'>rug.size</span> <span class='kw'>=</span> -<span class='fl'>0.02</span>, <span class='no'>...</span>)

<span class='co'># S3 method for glm</span>
<span class='fu'>cplot</span>(<span class='no'>object</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='fu'>terms</span>(<span class='no'>object</span>))<span class='kw'>[[</span><span class='st'>"term.labels"</span>]][<span class='fl'>1L</span>], <span class='kw'>dx</span> <span class='kw'>=</span> <span class='no'>x</span>,
  <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>, <span class='st'>"effect"</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>object</span>),
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>object</span>), <span class='no'>at</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>25L</span>,
  <span class='kw'>xvals</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/seq_range'>seq_range</a></span>(<span class='no'>data</span><span class='kw'>[[</span><span class='no'>x</span>]], <span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>) <span class='kw'>==</span> <span class='st'>"prediction"</span>)
  <span class='fu'>paste0</span>(<span class='st'>"Predicted value"</span>) <span class='kw'>else</span> <span class='fu'>paste0</span>(<span class='st'>"Marginal effect of "</span>, <span class='no'>dx</span>),
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"black"</span>, <span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>se.type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"shade"</span>, <span class='st'>"lines"</span>, <span class='st'>"none"</span>), <span class='kw'>se.col</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>se.fill</span> <span class='kw'>=</span> <span class='kw pkg'>grDevices</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/grDevices/topics/gray'>gray</a></span>(<span class='fl'>0.5</span>, <span class='fl'>0.5</span>), <span class='kw'>se.lwd</span> <span class='kw'>=</span> <span class='no'>lwd</span>, <span class='kw'>se.lty</span> <span class='kw'>=</span> <span class='kw'>if</span>
  (<span class='fu'>match.arg</span>(<span class='no'>se.type</span>) <span class='kw'>==</span> <span class='st'>"lines"</span>) <span class='fl'>1L</span> <span class='kw'>else</span> <span class='fl'>0L</span>, <span class='kw'>factor.lty</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>factor.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>factor.col</span> <span class='kw'>=</span> <span class='no'>se.col</span>, <span class='kw'>factor.fill</span> <span class='kw'>=</span> <span class='no'>factor.col</span>,
  <span class='kw'>factor.cex</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>xaxs</span> <span class='kw'>=</span> <span class='st'>"i"</span>, <span class='kw'>yaxs</span> <span class='kw'>=</span> <span class='no'>xaxs</span>, <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>scatter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>scatter.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>scatter.col</span> <span class='kw'>=</span> <span class='no'>se.col</span>, <span class='kw'>scatter.bg</span> <span class='kw'>=</span> <span class='no'>scatter.col</span>,
  <span class='kw'>scatter.cex</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug.col</span> <span class='kw'>=</span> <span class='no'>col</span>, <span class='kw'>rug.size</span> <span class='kw'>=</span> -<span class='fl'>0.02</span>, <span class='no'>...</span>)

<span class='co'># S3 method for loess</span>
<span class='fu'>cplot</span>(<span class='no'>object</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='fu'>terms</span>(<span class='no'>object</span>))<span class='kw'>[[</span><span class='st'>"term.labels"</span>]][<span class='fl'>1L</span>], <span class='kw'>dx</span> <span class='kw'>=</span> <span class='no'>x</span>,
  <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>, <span class='st'>"effect"</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>object</span>),
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>object</span>), <span class='no'>at</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>25L</span>,
  <span class='kw'>xvals</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/seq_range'>seq_range</a></span>(<span class='no'>data</span><span class='kw'>[[</span><span class='no'>x</span>]], <span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>) <span class='kw'>==</span> <span class='st'>"prediction"</span>)
  <span class='fu'>paste0</span>(<span class='st'>"Predicted value"</span>) <span class='kw'>else</span> <span class='fu'>paste0</span>(<span class='st'>"Marginal effect of "</span>, <span class='no'>dx</span>),
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"black"</span>, <span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>se.type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"shade"</span>, <span class='st'>"lines"</span>, <span class='st'>"none"</span>), <span class='kw'>se.col</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>se.fill</span> <span class='kw'>=</span> <span class='kw pkg'>grDevices</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/grDevices/topics/gray'>gray</a></span>(<span class='fl'>0.5</span>, <span class='fl'>0.5</span>), <span class='kw'>se.lwd</span> <span class='kw'>=</span> <span class='no'>lwd</span>, <span class='kw'>se.lty</span> <span class='kw'>=</span> <span class='kw'>if</span>
  (<span class='fu'>match.arg</span>(<span class='no'>se.type</span>) <span class='kw'>==</span> <span class='st'>"lines"</span>) <span class='fl'>1L</span> <span class='kw'>else</span> <span class='fl'>0L</span>, <span class='kw'>factor.lty</span> <span class='kw'>=</span> <span class='fl'>0L</span>,
  <span class='kw'>factor.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>factor.col</span> <span class='kw'>=</span> <span class='no'>se.col</span>, <span class='kw'>factor.fill</span> <span class='kw'>=</span> <span class='no'>factor.col</span>,
  <span class='kw'>factor.cex</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>xaxs</span> <span class='kw'>=</span> <span class='st'>"i"</span>, <span class='kw'>yaxs</span> <span class='kw'>=</span> <span class='no'>xaxs</span>, <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>scatter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>scatter.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>scatter.col</span> <span class='kw'>=</span> <span class='no'>se.col</span>, <span class='kw'>scatter.bg</span> <span class='kw'>=</span> <span class='no'>scatter.col</span>,
  <span class='kw'>scatter.cex</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug.col</span> <span class='kw'>=</span> <span class='no'>col</span>, <span class='kw'>rug.size</span> <span class='kw'>=</span> -<span class='fl'>0.02</span>, <span class='no'>...</span>)

<span class='co'># S3 method for polr</span>
<span class='fu'>cplot</span>(<span class='no'>object</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='fu'>terms</span>(<span class='no'>object</span>))<span class='kw'>[[</span><span class='st'>"term.labels"</span>]][<span class='fl'>1L</span>], <span class='kw'>dx</span> <span class='kw'>=</span> <span class='no'>x</span>,
  <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>, <span class='st'>"classprediction"</span>, <span class='st'>"stackedprediction"</span>, <span class='st'>"effect"</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>object</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>object</span>), <span class='no'>at</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>25L</span>, <span class='kw'>xvals</span> <span class='kw'>=</span> <span class='fu'>seq_range</span>(<span class='no'>data</span><span class='kw'>[[</span><span class='no'>x</span>]], <span class='kw'>n</span>
  <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>)
  <span class='kw'>==</span> <span class='st'>"effect"</span>) <span class='fu'>paste0</span>(<span class='st'>"Marginal effect of "</span>, <span class='no'>dx</span>) <span class='kw'>else</span> <span class='fu'>paste0</span>(<span class='st'>"Predicted value"</span>),
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>) <span class='kw'>%in%</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>,
  <span class='st'>"stackedprediction"</span>)) <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>1.04</span>) <span class='kw'>else</span> <span class='kw'>NULL</span>, <span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>factor.lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>factor.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>factor.col</span> <span class='kw'>=</span> <span class='no'>col</span>,
  <span class='kw'>factor.fill</span> <span class='kw'>=</span> <span class='no'>factor.col</span>, <span class='kw'>factor.cex</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>xaxs</span> <span class='kw'>=</span> <span class='st'>"i"</span>, <span class='kw'>yaxs</span> <span class='kw'>=</span> <span class='no'>xaxs</span>,
  <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>scatter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scatter.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>,
  <span class='kw'>scatter.col</span> <span class='kw'>=</span> <span class='no'>factor.col</span>, <span class='kw'>scatter.bg</span> <span class='kw'>=</span> <span class='no'>scatter.col</span>, <span class='kw'>scatter.cex</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
  <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug.col</span> <span class='kw'>=</span> <span class='no'>col</span>, <span class='kw'>rug.size</span> <span class='kw'>=</span> -<span class='fl'>0.02</span>, <span class='no'>...</span>)

<span class='co'># S3 method for multinom</span>
<span class='fu'>cplot</span>(<span class='no'>object</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>attributes</span>(<span class='fu'>terms</span>(<span class='no'>object</span>))<span class='kw'>[[</span><span class='st'>"term.labels"</span>]][<span class='fl'>1L</span>], <span class='kw'>dx</span> <span class='kw'>=</span> <span class='no'>x</span>,
  <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>, <span class='st'>"classprediction"</span>, <span class='st'>"stackedprediction"</span>, <span class='st'>"effect"</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw pkg'>prediction</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>object</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>object</span>), <span class='no'>at</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>25L</span>, <span class='kw'>xvals</span> <span class='kw'>=</span> <span class='fu'>seq_range</span>(<span class='no'>data</span><span class='kw'>[[</span><span class='no'>x</span>]], <span class='kw'>n</span>
  <span class='kw'>=</span> <span class='no'>n</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>)
  <span class='kw'>==</span> <span class='st'>"effect"</span>) <span class='fu'>paste0</span>(<span class='st'>"Marginal effect of "</span>, <span class='no'>dx</span>) <span class='kw'>else</span> <span class='fu'>paste0</span>(<span class='st'>"Predicted value"</span>),
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>if</span> (<span class='fu'>match.arg</span>(<span class='no'>what</span>) <span class='kw'>%in%</span> <span class='fu'>c</span>(<span class='st'>"prediction"</span>,
  <span class='st'>"stackedprediction"</span>)) <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>1.04</span>) <span class='kw'>else</span> <span class='kw'>NULL</span>, <span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"black"</span>,
  <span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>factor.lty</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>factor.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>, <span class='kw'>factor.col</span> <span class='kw'>=</span> <span class='no'>col</span>,
  <span class='kw'>factor.fill</span> <span class='kw'>=</span> <span class='no'>factor.col</span>, <span class='kw'>factor.cex</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>xaxs</span> <span class='kw'>=</span> <span class='st'>"i"</span>, <span class='kw'>yaxs</span> <span class='kw'>=</span> <span class='no'>xaxs</span>,
  <span class='kw'>las</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>scatter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scatter.pch</span> <span class='kw'>=</span> <span class='fl'>19L</span>,
  <span class='kw'>scatter.col</span> <span class='kw'>=</span> <span class='no'>factor.col</span>, <span class='kw'>scatter.bg</span> <span class='kw'>=</span> <span class='no'>scatter.col</span>, <span class='kw'>scatter.cex</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
  <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug.col</span> <span class='kw'>=</span> <span class='no'>col</span>, <span class='kw'>rug.size</span> <span class='kw'>=</span> -<span class='fl'>0.02</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A model object.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Additional arguments passed to <code><a href='http://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></code>.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A character string specifying the name of variable to use as the x-axis dimension in the plot.</p></td>
    </tr>
    <tr>
      <th>dx</th>
      <td><p>If <code>what = "effect"</code>, the variable whose conditional marginal effect should be displayed. By default it is <code>x</code> (so the plot displays the marginal effect of <code>x</code> across values of <code>x</code>); ignored otherwise. If <code>dx</code> is a factor with more than 2 levels, an error will be issued.</p></td>
    </tr>
    <tr>
      <th>what</th>
      <td><p>A character string specifying whether to draw a &#8220;prediction&#8221; (fitted values from the model, calculated using <code><a href='http://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></code>) or an &#8220;effect&#8221; (average marginal effect of <code>dx</code> conditional on <code>x</code>, using <code><a href='margins.html'>margins</a></code>). Methods for classes other than &#8220;lm&#8221; or &#8220;glm&#8221; may provided additional options (e.g., <code>cplot.polr()</code> provides &#8220;stackedprediction&#8221; and &#8220;class&#8221; alternatives).</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A data frame to override the default value offered in <code>object[["model"]]</code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>A character string specifying whether to calculate predictions on the response scale (default) or link (only relevant for non-linear models).</p></td>
    </tr>
    <tr>
      <th>vcov</th>
      <td><p>A matrix containing the variance-covariance matrix for estimated model coefficients, or a function to perform the estimation with <code>model</code> as its only argument.</p></td>
    </tr>
    <tr>
      <th>at</th>
      <td><p>Currently ignored.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>An integer specifying the number of points across <code>x</code> at which to calculate the predicted value or marginal effect, when <code>x</code> is numeric. Ignored otherwise.</p></td>
    </tr>
    <tr>
      <th>xvals</th>
      <td><p>A numeric vector of values at which to calculate predictions or marginal effects, if <code>x</code> is numeric. By default, it is calculated from the data using <code>seq_range</code>. If <code>x</code> is a factor, this is ignored, as is <code>n</code>.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>The confidence level required (used to draw uncertainty bounds).</p></td>
    </tr>
    <tr>
      <th>draw</th>
      <td><p>A logical (default <code>TRUE</code>), specifying whether to draw the plot. If <code>FALSE</code>, the data used in drawing are returned as a list of data.frames. This might be useful if you want to plot using an alternative plotting package (e.g., ggplot2). Also, if set to value &#8220;add&#8221;, then the resulting data is added to the existing plot.</p></td>
    </tr>
    <tr>
      <th>xlab</th>
      <td><p>A character string specifying the value of <code>xlab</code> in <code><a href='http://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></code>.</p></td>
    </tr>
    <tr>
      <th>ylab</th>
      <td><p>A character string specifying the value of <code>ylab</code> in <code><a href='http://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></code>.</p></td>
    </tr>
    <tr>
      <th>xlim</th>
      <td><p>A two-element numeric vector specifying the x-axis limits. Set automatically if missing.</p></td>
    </tr>
    <tr>
      <th>ylim</th>
      <td><p>A two-element numeric vector specifying the y-axis limits. Set automatically if missing.</p></td>
    </tr>
    <tr>
      <th>lwd</th>
      <td><p>An integer specifying the width of the prediction or marginal effect line. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/lines'>lines</a></code>. If <code>x</code> is a factor variable in the model, this is used to set the line width of the error bars.</p></td>
    </tr>
    <tr>
      <th>col</th>
      <td><p>A character string specifying the color of the prediction or marginal effect line. If <code>x</code> is a factor variable in the model, this is used to set the color of the error bars.</p></td>
    </tr>
    <tr>
      <th>lty</th>
      <td><p>An integer specifying the &#8220;line type&#8221; of the prediction or marginal effect line. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/par'>par</a></code>. If <code>x</code> is a factor variable in the model, this is used to set the line type of the error bars.</p></td>
    </tr>
    <tr>
      <th>se.type</th>
      <td><p>A character string specifying whether to draw the confidence interval as &#8220;lines&#8221; (the default, using <code><a href='http://www.rdocumentation.org/packages/graphics/topics/lines'>lines</a></code>) or a &#8220;shade&#8221; (using <code><a href='http://www.rdocumentation.org/packages/graphics/topics/polygon'>polygon</a></code>).</p></td>
    </tr>
    <tr>
      <th>se.col</th>
      <td><p>If <code>se.type = "lines"</code>, a character string specifying the color of the confidence interval lines. If <code>se.type = "shade"</code>, the color of the shaded region border.</p></td>
    </tr>
    <tr>
      <th>se.fill</th>
      <td><p>If <code>se.type = "shade"</code>, the color of the shaded region. Ignored otherwise.</p></td>
    </tr>
    <tr>
      <th>se.lwd</th>
      <td><p>If <code>se.type = "lines"</code>, the width of the confidence interval lines. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/lines'>lines</a></code>.</p></td>
    </tr>
    <tr>
      <th>se.lty</th>
      <td><p>If <code>se.type = "lines"</code>, an integer specifying the &#8220;line type&#8221; of the confidence interval lines; if <code>se.type = "shade"</code>, the line type of the shaded polygon border. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/par'>par</a></code>.</p></td>
    </tr>
    <tr>
      <th>factor.lty</th>
      <td><p>If <code>x</code> is a factor variable in the model, this is used to set the line type of an optional line connecting predictions across factor levels. If <code>factor.lty = 0L</code> (the default), no line is drawn.. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/par'>par</a></code>.</p></td>
    </tr>
    <tr>
      <th>factor.pch</th>
      <td><p>If <code>x</code> is a factor variable in the model, the shape to use when drawing points. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>factor.col</th>
      <td><p>If <code>x</code> is a factor variable in the model, the color to use for the border of the points. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>factor.fill</th>
      <td><p>If <code>x</code> is a factor variable in the model, the color to use for the fill of the points. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>factor.cex</th>
      <td><p>If <code>x</code> is a factor variable in the model, the &#8220;expansion factor&#8221; to use for the point size. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>xaxs</th>
      <td><p>A character string specifying <code>xaxs</code>. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/par'>par</a></code>.</p></td>
    </tr>
    <tr>
      <th>yaxs</th>
      <td><p>A character string specifying <code>xaxs</code>. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/par'>par</a></code>.</p></td>
    </tr>
    <tr>
      <th>las</th>
      <td><p>An integer string specifying <code>las</code>. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/par'>par</a></code>.</p></td>
    </tr>
    <tr>
      <th>scatter</th>
      <td><p>A logical indicating whether to plot the observed data in <code>data</code> as a scatterplot.</p></td>
    </tr>
    <tr>
      <th>scatter.pch</th>
      <td><p>If <code>scatter = TRUE</code>, an integer specifying a shape to use for plotting the data. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>scatter.col</th>
      <td><p>If <code>scatter = TRUE</code>, a character string specifying a color to use for plotting the data. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>scatter.bg</th>
      <td><p>If <code>scatter = TRUE</code>, a character string specifying a color to use for plotting the data. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>scatter.cex</th>
      <td><p>If <code>scatter = TRUE</code>, an integer specifying the size of the points. See <code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>points</a></code>.</p></td>
    </tr>
    <tr>
      <th>rug</th>
      <td><p>A logical specifying whether to include an x-axis &#8220;rug&#8221; (see <code><a href='http://www.rdocumentation.org/packages/graphics/topics/rug'>rug</a></code>).</p></td>
    </tr>
    <tr>
      <th>rug.col</th>
      <td><p>A character string specifying <code>col</code> to <code><a href='http://www.rdocumentation.org/packages/graphics/topics/rug'>rug</a></code>.</p></td>
    </tr>
    <tr>
      <th>rug.size</th>
      <td><p>A numeric value specifying <code>ticksize</code> to <code><a href='http://www.rdocumentation.org/packages/graphics/topics/rug'>rug</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tidy data frame containing the data used to draw the plot. Use <code>draw = FALSE</code> to simply generate the data structure for use elsewhere.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Note that when <code>what = "prediction"</code>, the plots show predictions holding values of the data at their mean or mode, whereas when <code>what = "effect"</code> average marginal effects (i.e., at observed values) are shown.</p>
<p>The overall aesthetic is somewhat similar to to the output produced by the <code>marginalModelPlot()</code> function in the <b><a href='https://cran.r-project.org/package=car'>car</a></b> package.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='plot.margins.html'>plot.margins</a></code>, <code><a href='persp.html'>persp.lm</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'>require</span>(<span class='st'>'datasets'</span>)
<span class='co'># prediction from several angles</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>Sepal.Length</span> ~ <span class='no'>Sepal.Width</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>)
<span class='fu'>cplot</span>(<span class='no'>m</span>)

<span class='co'># more complex model</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>Sepal.Length</span> ~ <span class='no'>Sepal.Width</span> * <span class='no'>Petal.Width</span> * <span class='fu'>I</span>(<span class='no'>Petal.Width</span> ^ <span class='fl'>2</span>),
        <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>head</span>(<span class='no'>iris</span>, <span class='fl'>50</span>))
<span class='co'>## marginal effect of 'Petal.Width' across 'Petal.Width'</span>
<span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"Petal.Width"</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"effect"</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>10</span>)

<span class='co'># factor independent variables</span>
<span class='no'>mtcars</span><span class='kw'>[[</span><span class='st'>"am"</span>]] <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>mtcars</span><span class='kw'>[[</span><span class='st'>"am"</span>]])
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='no'>am</span> * <span class='no'>wt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)
<span class='co'>## predicted values for each factor level</span>
<span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"am"</span>)
<span class='co'>## marginal effect of each factor level across numeric variable</span>
<span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"wt"</span>, <span class='kw'>dx</span> <span class='kw'>=</span> <span class='st'>"am"</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"effect"</span>)

<span class='co'># marginal effect of 'Petal.Width' across 'Sepal.Width'</span>
<span class='co'>## without drawing the plot</span>
<span class='co'>## this might be useful for using, e.g., ggplot2 for plotting</span>
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"Sepal.Width"</span>, <span class='kw'>dx</span> <span class='kw'>=</span> <span class='st'>"Petal.Width"</span>,
             <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"effect"</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>draw</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='kw'>if</span> (<span class='fu'>require</span>(<span class='st'>"ggplot2"</span>)) {
  <span class='co'># use ggplot2 instead of base graphics</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>tmp</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>Petal.Width</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='st'>"effect"</span>)) +
         <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='kw'>lwd</span> <span class='kw'>=</span> <span class='fl'>2</span>) +
         <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>effect</span> + <span class='fl'>1.96</span>*<span class='no'>se.effect</span>)) +
         <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>effect</span> - <span class='fl'>1.96</span>*<span class='no'>se.effect</span>))
}
<span class='co'># a non-linear model</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'>glm</span>(<span class='no'>am</span> ~ <span class='no'>wt</span>*<span class='no'>drat</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>binomial</span>)
<span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"wt"</span>) <span class='co'># prediction</span>

<span class='co'># effects on linear predictor and outcome</span>
<span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"drat"</span>, <span class='kw'>dx</span> <span class='kw'>=</span> <span class='st'>"wt"</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"effect"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"link"</span>)
<span class='fu'>cplot</span>(<span class='no'>m</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"drat"</span>, <span class='kw'>dx</span> <span class='kw'>=</span> <span class='st'>"wt"</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"effect"</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"response"</span>)

<span class='co'># plot conditional predictions across a third factor</span>
<span class='fu'>local</span>({
  <span class='no'>iris</span>$<span class='no'>long</span> <span class='kw'>&lt;-</span> <span class='fu'>rbinom</span>(<span class='fu'>nrow</span>(<span class='no'>iris</span>), <span class='fl'>1</span>, <span class='fl'>0.6</span>)
  <span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>glm</span>(<span class='no'>long</span> ~ <span class='no'>Sepal.Width</span>*<span class='no'>Species</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>)
  <span class='fu'>cplot</span>(<span class='no'>x</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"Sepal.Width"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>[<span class='no'>iris</span>$<span class='no'>Species</span> <span class='kw'>==</span> <span class='st'>"setosa"</span>, ],
        <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>1</span>), <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"red"</span>, <span class='kw'>se.fill</span> <span class='kw'>=</span> <span class='fu'>rgb</span>(<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>.5</span>), <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>4.5</span>))
  <span class='fu'>cplot</span>(<span class='no'>x</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"Sepal.Width"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>[<span class='no'>iris</span>$<span class='no'>Species</span> <span class='kw'>==</span> <span class='st'>"versicolor"</span>, ],
        <span class='kw'>draw</span> <span class='kw'>=</span> <span class='st'>"add"</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"blue"</span>, <span class='kw'>se.fill</span> <span class='kw'>=</span> <span class='fu'>rgb</span>(<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>.5</span>))
  <span class='fu'>cplot</span>(<span class='no'>x</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"Sepal.Width"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>[<span class='no'>iris</span>$<span class='no'>Species</span> <span class='kw'>==</span> <span class='st'>"virginica"</span>, ],
        <span class='kw'>draw</span> <span class='kw'>=</span> <span class='st'>"add"</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"green"</span>, <span class='kw'>se.fill</span> <span class='kw'>=</span> <span class='fu'>rgb</span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>.5</span>))
})

<span class='co'># ordinal outcome</span>
<span class='kw'>if</span> (<span class='fu'>require</span>(<span class='st'>"MASS"</span>)) {
  <span class='co'># x is a factor variable</span>
  <span class='no'>house.plr</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/MASS/topics/polr'>polr</a></span>(<span class='no'>Sat</span> ~ <span class='no'>Infl</span> + <span class='no'>Type</span> + <span class='no'>Cont</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='no'>Freq</span>,
                    <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>housing</span>)
  <span class='co'>## predicted probabilities</span>
  <span class='fu'>cplot</span>(<span class='no'>house.plr</span>)
  <span class='co'>## cumulative predicted probabilities</span>
  <span class='fu'>cplot</span>(<span class='no'>house.plr</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"stacked"</span>)
  <span class='co'>## ggplot2 example</span>
  <span class='kw'>if</span> (<span class='fu'>require</span>(<span class='st'>"ggplot2"</span>)) {
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='fu'>cplot</span>(<span class='no'>house.plr</span>), <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>xvals</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>yvals</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>level</span>)) +
      <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>color</span> <span class='kw'>=</span> <span class='no'>level</span>))
  }

  <span class='co'># x is continuous</span>
  <span class='no'>cyl.plr</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/MASS/topics/polr'>polr</a></span>(<span class='fu'>factor</span>(<span class='no'>cyl</span>) ~ <span class='no'>wt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)
  <span class='fu'>cplot</span>(<span class='no'>cyl.plr</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"red"</span>, <span class='st'>"purple"</span>, <span class='st'>"blue"</span>), <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"stacked"</span>)
  <span class='fu'>cplot</span>(<span class='no'>cyl.plr</span>, <span class='kw'>what</span> <span class='kw'>=</span> <span class='st'>"class"</span>)
}

<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thomas J. Leeper.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>


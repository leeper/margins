<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • margins</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Changelog" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">margins</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.23</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">An Introduction to 'margins'</a>
    </li>
    <li>
      <a href="../articles/Stata.html">Comparison with Stata's 'margins' command</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leeper/margins">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/leeper/margins/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="margins-0-3-23" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-23" class="anchor"></a>margins 0.3.23<small> Unreleased </small>
</h1>
<ul>
<li>Fix a small issue in <code>print()</code> and <code>summary()</code> methods related to the release of prediction 0.3.6.</li>
</ul>
</div>
    <div id="margins-0-3-22" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-22" class="anchor"></a>margins 0.3.22<small> Unreleased </small>
</h1>
<ul>
<li>Expanded support for objects of class “merMod” from <strong>lme4</strong>, including support for variance estimation and an expanded test suite. (<a href='https://github.com/leeper/margins/issues/56'>#56</a>)</li>
</ul>
</div>
    <div id="margins-0-3-21" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-21" class="anchor"></a>margins 0.3.21<small> Unreleased </small>
</h1>
<ul>
<li>Modified the internals of <code>gradient_factory()</code> to be more robust to an expanded set of model classes through the introduction of an internal function <code>reset_coefs()</code>. A test suite for this function has been added.</li>
</ul>
</div>
    <div id="margins-0-3-20" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-20" class="anchor"></a>margins 0.3.20<small> 2018-04-24 </small>
</h1>
<ul>
<li>Added support for objects of class “ivreg” from <strong>AER</strong>.</li>
<li>
<code><a href="../reference/margins.html">margins.default()</a></code> now attempts to calculate marginal effect variances in order to, by default, support additional model classes.</li>
</ul>
</div>
    <div id="margins-0-3-19" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-19" class="anchor"></a>margins 0.3.19<small> Unreleased </small>
</h1>
<ul>
<li>Added support for objects of class “betareg” from <strong>betareg</strong>. (<a href='https://github.com/leeper/margins/issues/90'>#90</a>)</li>
</ul>
</div>
    <div id="margins-0-3-18" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-18" class="anchor"></a>margins 0.3.18<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/margins.html">margins()</a></code> now returns attributes “vcov” and “jacobian” (the latter only when <code>vce = "delta"</code>), which contain the full variance-covariance matrix for the average marginal effects and jacobian for the same. This is different behavior from the previous draft (v0.3.17) because the attributes now always contain a single matrix; again use the <code>vcov()</code> method rather than accessing the attribute directly lest it change in the future. This allows calculation combination of marginal effects, such as the difference between two AMEs. Some internal functions have been renamed and code reorganized to make this possible. (<a href='https://github.com/leeper/margins/issues/87'>#87</a>, h/t Trenton Mize)</li>
<li>The “at” attribute returned by <code><a href="../reference/margins.html">margins()</a></code> now contains the input value passed to the <code>at</code> argument to the function. New attribute “at_vars” returns a character vector of variables specified therein.</li>
<li>The data frame returned by <code><a href="../reference/margins.html">margins()</a></code> now contains an added column <code>"_at_number"</code>, which specifies which <code>at</code> combination a row comes from. This may be changed or removed in the future, but is useful for matching subsets of the data frame to corresponding entries in the “vcov” and “jacobian” matrices.</li>
</ul>
</div>
    <div id="margins-0-3-17" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-17" class="anchor"></a>margins 0.3.17<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/margins.html">margins()</a></code> now returns an attribute (“vcov”) containing the variance-covariance matrix for the average marginal effects and a new <code>vcov.margins()</code> method is provided for extracting it. Behavior when using <code>at</code> specifications is unspecified and may change in the future. (<a href='https://github.com/leeper/margins/issues/87'>#87</a>, h/t Trenton Mize)</li>
<li>Updated examples in <code>README.Rmd</code>. (<a href='https://github.com/leeper/margins/issues/83'>#83</a>)</li>
</ul>
</div>
    <div id="margins-0-3-16" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-16" class="anchor"></a>margins 0.3.16<small> Unreleased </small>
</h1>
<ul>
<li>Fixed a bug in <code><a href="../reference/cplot.html">cplot()</a></code> when <code>xvar</code> was of class “ordered”. (<a href='https://github.com/leeper/margins/issues/77'>#77</a>, h/t Francisco Llaneras)</li>
<li>Fixed a bug in <code><a href="../reference/plot.margins.html">plot.margins()</a></code> when <code>at</code> contained only one variable. (<a href='https://github.com/leeper/margins/issues/78'>#78</a>, h/t <a href='http://github.com/cyberbryce'>@cyberbryce</a>)</li>
</ul>
</div>
    <div id="margins-0-3-15" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-15" class="anchor"></a>margins 0.3.15<small> Unreleased </small>
</h1>
<ul>
<li>Tried to improve the handling of edge case model specifications like <code>y ~ I(x^2)</code>, <code>y ~ x + I(2*x)</code>, and those involving RHS interactions between factors where some cells are not observed in the data. Added a test suite to cover these cases. (<a href='https://github.com/leeper/margins/issues/82'>#82</a>)</li>
<li>Continued to update behavior of internal function <code>find_terms_in_model()</code>.</li>
</ul>
</div>
    <div id="margins-0-3-14" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-14" class="anchor"></a>margins 0.3.14<small> Unreleased </small>
</h1>
<ul>
<li>Fixed a bug in survey-weighted objects involving weights and expanded the test suite to cover these cases.</li>
</ul>
</div>
    <div id="margins-0-3-13" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-13" class="anchor"></a>margins 0.3.13<small> Unreleased </small>
</h1>
<ul>
<li>Fixed a bug in all functions (ultimately in internal utility <code>clean_terms()</code>) that occurred when formulae contained variables with backticked names that contained spaces. (<a href='https://github.com/leeper/margins/issues/80'>#80</a>)</li>
</ul>
</div>
    <div id="margins-0-3-12" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-12" class="anchor"></a>margins 0.3.12<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/dydx.html">dydx()</a></code> now uses the performance-enhancing <code><a href="http://www.rdocumentation.org/packages/prediction/topics/prediction">prediction::prediction(..., calculate_se = FALSE)</a></code> setting, where possible (introduced in <strong>prediction</strong> 0.2.4)</li>
<li>
<code><a href="http://www.rdocumentation.org/packages/data.table/topics/rbindlist">data.table::rbindlist()</a></code> is used instead of <code><a href="http://www.rdocumentation.org/packages/base/topics/cbind">base::rbind()</a></code> inside <code><a href="../reference/dydx.html">dydx()</a></code>.</li>
</ul>
</div>
    <div id="margins-0-3-11" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-11" class="anchor"></a>margins 0.3.11<small> Unreleased </small>
</h1>
<ul>
<li>Changed some internal representations from data frames to matrices in an effort to improve performance. <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> and <code><a href="../reference/dydx.html">dydx()</a></code> gain an <code>as.data.frame</code> argument to regulate the class of their responses.</li>
<li>Internal calls to <code><a href="http://www.rdocumentation.org/packages/prediction/topics/prediction">prediction::prediction()</a></code> were halved by stacking data frames used in calculating numerical derivatives (inside <code><a href="../reference/dydx.html">dydx()</a></code> methods) and then splitting the resulting predicted value vectors.</li>
</ul>
</div>
    <div id="margins-0-3-10" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-10" class="anchor"></a>margins 0.3.10<small> Unreleased </small>
</h1>
<ul>
<li>Added an (internal use only) argument, <code>varslist</code>, to <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> and several internal functions that significantly improves performance. The performance gain is due to computational cost of identifying terms in model formulae each time <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> was called, which occurred repeatedly (e.g., during variance estimation). By performing this once at the <code><a href="../reference/margins.html">margins()</a></code>-level and passing the argument throughout, <code><a href="../reference/margins.html">margins()</a></code> is perhaps twice as fast as in versions &lt;= 0.3.9. But, importantly, note that this argument should not be specified by end users!</li>
<li>Some internal edits were made to the formula-processing functions <code>find_terms_in_model()</code> and <code>clean_terms()</code>, removing many regex calls with the goal of improving performance.</li>
<li>Removed <strong>compiler</strong> dependency, which appeared to not improve performance.</li>
</ul>
</div>
    <div id="margins-0-3-9" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-9" class="anchor"></a>margins 0.3.9<small> Unreleased </small>
</h1>
<ul>
<li>Fixed a bug wherein model formulae involving non-standard variables names with spaces in them led to errors. (<a href='https://github.com/leeper/margins/issues/80'>#80</a>)</li>
</ul>
</div>
    <div id="margins-0-3-8" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-8" class="anchor"></a>margins 0.3.8<small> Unreleased </small>
</h1>
<ul>
<li>Added method for “svyglm” from <strong>survey</strong>.</li>
<li>Improved handling of survey-weighted estimates. Removed weight-related warnings from <code><a href="../reference/margins.html">margins()</a></code> for unweighted models.</li>
<li>
<code>print()</code> and <code>summary()</code> now handle survey-weighted marginal effects.</li>
</ul>
</div>
    <div id="margins-0-3-7" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-7" class="anchor"></a>margins 0.3.7<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/margins.html">margins()</a></code> and <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> gain a <code>variables</code> argument to request marginal effects for a subset of variables included in a model. (<a href='https://github.com/leeper/margins/issues/65'>#65</a>, h/t Vincent Arul-Bundock)</li>
</ul>
</div>
    <div id="margins-0-3-6" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-6" class="anchor"></a>margins 0.3.6<small> Unreleased </small>
</h1>
<ul>
<li>Export <code><a href="../reference/margins.html">margins.merMod()</a></code>. (<a href='https://github.com/leeper/margins/issues/56'>#56</a>)</li>
</ul>
</div>
    <div id="margins-0-3-5" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-5" class="anchor"></a>margins 0.3.5<small> Unreleased </small>
</h1>
<ul>
<li>Added a <code><a href="../reference/cplot.html">cplot.clm()</a></code> method. (<a href='https://github.com/leeper/margins/issues/63'>#63</a>, h/t David Barron)</li>
</ul>
</div>
    <div id="margins-0-3-4" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-4" class="anchor"></a>margins 0.3.4<small> Unreleased </small>
</h1>
<ul>
<li>Fixed a bug in <code><a href="../reference/cplot.html">cplot.polr()</a></code>. (<a href='https://github.com/leeper/margins/issues/62'>#62</a>, h/t David Barron)</li>
</ul>
</div>
    <div id="margins-0-3-3" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-3" class="anchor"></a>margins 0.3.3<small> Unreleased </small>
</h1>
<ul>
<li>Fixed “margins” object structure in <code><a href="../reference/margins.html">margins.merMod()</a></code>.</li>
<li>Switched <code>print()</code> and <code>summary()</code> methods to using <code>weighted.mean()</code> instead of <code>mean()</code>. (<a href='https://github.com/leeper/margins/issues/45'>#45</a>)</li>
</ul>
</div>
    <div id="margins-0-3-2" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-2" class="anchor"></a>margins 0.3.2<small> Unreleased </small>
</h1>
<ul>
<li>Added method for class “polr” from <strong>MASS</strong>. (<a href='https://github.com/leeper/margins/issues/60'>#60</a>)</li>
</ul>
</div>
    <div id="margins-0-3-1" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-1" class="anchor"></a>margins 0.3.1<small> Unreleased </small>
</h1>
<ul>
<li>Added method for class “nnet” from <strong>nnet</strong> as an initial implementation of multi-category outcome models. (<a href='https://github.com/leeper/margins/issues/60'>#60</a>)</li>
</ul>
</div>
    <div id="margins-0-3-0" class="section level1">
<h1 class="page-header">
<a href="#margins-0-3-0" class="anchor"></a>margins 0.3.0<small> 2017-03-22 </small>
</h1>
<ul>
<li>Significantly modified the data structure returned by <code><a href="../reference/margins.html">margins()</a></code>. It now returns a data frame with an added <code>at</code> attribute, specifying the names of the variables that have been fixed by <code>build_datalist()</code>. (<a href='https://github.com/leeper/margins/issues/58'>#58</a>)</li>
<li>Renamed marginal effects, variance, and standard error columns returned by <code><a href="../reference/margins.html">margins()</a></code>. Marginal effects columns are prefixed by <code>dydx_</code>. Variances of the <em>average</em> marginal effect are stored (repeatedly, across observations) in new <code>Var_dydx_</code> columns. Unit-specific standard errors, if requested, are stored as <code>SE_dydx_</code> columns. (<a href='https://github.com/leeper/margins/issues/58'>#58</a>)</li>
<li>
<code>summary.margins()</code> now returns a single data frame of marginal effect estimates. Column names have also changed to avoid use of special characters (thus making it easier to use column names in plotting with, for example, ggplot2). Row-order can be controlled by the <code>by_factor</code> attribute, which by default sorts the data frame by the factor/term. If set to <code>by_factor = FALSE</code>, the data frame is sorted by the <code>at</code> variables. This behavior cascades into the <code>print.summary.margins()</code> method. (<a href='https://github.com/leeper/margins/issues/58'>#58</a>)</li>
<li>
<code>print.margins()</code> now presents (but does not return) effect estimates as a condensed data frame with some auxiliary information. Its behavior when using <code>at</code> is improved and tidied. (<a href='https://github.com/leeper/margins/issues/58'>#58</a>)</li>
<li>
<code>build_margins()</code> is no longer exported. Arguments used to control its behavior have been exposed in <code><a href="../reference/margins.html">margins()</a></code> methods.</li>
<li>
<code><a href="../reference/plot.margins.html">plot.margins()</a></code> now displays marginal effects across each level of <code>at</code>. (<a href='https://github.com/leeper/margins/issues/58'>#58</a>)</li>
<li>
<code>build_margins()</code> and thus <code><a href="../reference/margins.html">margins()</a></code> no longer returns the original data twice (a bug introduced by change in behavior of <code>prediction()</code>). (<a href='https://github.com/leeper/margins/issues/57'>#57</a>)</li>
<li>All methods for objects of class <code>"marginslist"</code> have been removed. (<a href='https://github.com/leeper/margins/issues/58'>#58</a>)</li>
<li>The <code>at</code> argument in <code><a href="../reference/plot.margins.html">plot.margins()</a></code> has been renamed to <code>pos</code>, to avoid ambiguity with <code>at</code> as used elsewhere in the package.</li>
<li>
<code>persp()</code> and <code>image()</code> methods gain a <code>dx</code> argument (akin to that in <code><a href="../reference/cplot.html">cplot()</a></code>) to allow visualization of marginal effects of a variable across levels of two other variables. The default behavior remains unchanged.</li>
<li>Cleaned up documentation and add some examples.</li>
</ul>
</div>
    <div id="margins-0-2-26" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-26" class="anchor"></a>margins 0.2.26<small> Unreleased </small>
</h1>
<ul>
<li>Added support for <code>"merMod"</code> models from <strong>lme4</strong>, though no variance estimation is currently supported.</li>
<li>Imported <code><a href="http://www.rdocumentation.org/packages/prediction/topics/mean_or_mode">prediction::mean_or_mode()</a></code> for use in <code><a href="../reference/cplot.html">cplot()</a></code> methods.</li>
</ul>
</div>
    <div id="margins-0-2-25" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-25" class="anchor"></a>margins 0.2.25<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/cplot.html">cplot.polr()</a></code> now allows the display of “stacked” (cumulative) predicted probabilities. (<a href='https://github.com/leeper/margins/issues/49'>#49</a>)</li>
<li>Added an example of <code><a href="../reference/cplot.html">cplot(draw = "add")</a></code> to display predicted probabilities across a third factor variable. (<a href='https://github.com/leeper/margins/issues/46'>#46</a>)</li>
<li>Moved the <code>build_datalist()</code> and <code>seq_range()</code> functions to the <strong>prediction</strong> package.</li>
<li>A tentative <code><a href="../reference/cplot.html">cplot.multinom()</a></code> method has been added.</li>
</ul>
</div>
    <div id="margins-0-2-24" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-24" class="anchor"></a>margins 0.2.24<small> Unreleased </small>
</h1>
<ul>
<li>The internal code of <code><a href="../reference/cplot.html">cplot.lm()</a></code> has been refactored so that the actual plotting code now relies in non-exported utility functions, which can be used in other methods. This should make it easier to maintain existing methods and add new ones. (<a href='https://github.com/leeper/margins/issues/49'>#49</a>)</li>
<li>A new <code><a href="../reference/cplot.html">cplot()</a></code> method for objects of class <code>"polr"</code> has been added (<a href='https://github.com/leeper/margins/issues/49'>#49</a>).</li>
</ul>
</div>
    <div id="margins-0-2-23" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-23" class="anchor"></a>margins 0.2.23<small> Unreleased </small>
</h1>
<ul>
<li>The <code>extract_marginal_effects()</code> function has been removed and replaced by <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> methods for objects of classes <code>"margins"</code> and <code>"marginslist"</code>.</li>
<li>Added a dependency on <strong>prediction</strong> v.0.1.3 and, implicitly, an enhances suggestion of <strong>survey</strong> v3.31-5 to resolve an underlying <code>prediction()</code> issue for models of class <code>"svyglm"</code>. (<a href='https://github.com/leeper/margins/issues/47'>#47</a>, h/t Carl Ganz)</li>
</ul>
</div>
    <div id="margins-0-2-20" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-20" class="anchor"></a>margins 0.2.20<small> Unreleased </small>
</h1>
<ul>
<li>A warning is now issued when a model uses weights, indicating that they are ignored. (<a href='https://github.com/leeper/margins/issues/4'>#4</a>)</li>
<li>Various errors and warnings that occurred when applying <code><a href="../reference/margins.html">margins()</a></code> to a model with weights have been fixed.</li>
<li>
<code><a href="../reference/cplot.html">cplot()</a></code> now issues an error when attempting to display the effects of a factor (with &gt; 2 levels).</li>
</ul>
</div>
    <div id="margins-0-2-20-1" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-20-1" class="anchor"></a>margins 0.2.20<small> Unreleased </small>
</h1>
<ul>
<li>Fixed a bug in <code>get_effect_variances(vce = "bootstrap")</code>, wherein the variance of the marginal effects was always zero.</li>
</ul>
</div>
    <div id="margins-0-2-20-2" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-20-2" class="anchor"></a>margins 0.2.20<small> Unreleased </small>
</h1>
<ul>
<li>Factored the <code>prediction()</code> generic and methods into a separate package, <strong>prediction</strong>, to ease maintainence.</li>
<li>Added a <code>print.summary.margins()</code> method to separate construction of the summary data frame the printing thereof.</li>
<li>The “Technical Details” vignette now describes the package functionality and computational approach in near-complete detail.</li>
</ul>
</div>
    <div id="margins-0-2-19" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-19" class="anchor"></a>margins 0.2.19<small> Unreleased </small>
</h1>
<ul>
<li>Plotting functions <code><a href="../reference/cplot.html">cplot()</a></code>, <code>persp()</code>, and <code>image()</code> gain a <code>vcov</code> argumetn to pass to `build_margins(). (<a href='https://github.com/leeper/margins/issues/43'>#43</a>)</li>
<li>
<code><a href="../reference/cplot.html">cplot()</a></code> now allows for the display of multiple conditional relationships by setting <code>draw = "add"</code>. (<a href='https://github.com/leeper/margins/issues/32'>#32</a>)</li>
<li>The package Introduction vignette has improved examples, including ggplot2 examples using <code><a href="../reference/cplot.html">cplot()</a></code> data. (<a href='https://github.com/leeper/margins/issues/31'>#31</a>)</li>
</ul>
</div>
    <div id="margins-0-2-18" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-18" class="anchor"></a>margins 0.2.18<small> Unreleased </small>
</h1>
<ul>
<li>Added support in <code><a href="../reference/dydx.html">dydx.default()</a></code> to allow the calculation of various discrete changes rather than only numerical derivatives.</li>
</ul>
</div>
    <div id="margins-0-2-17" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-17" class="anchor"></a>margins 0.2.17<small> Unreleased </small>
</h1>
<ul>
<li>Fixes to handling of factors and ordered variables converted within formulae. (<a href='https://github.com/leeper/margins/issues/38'>#38</a>)</li>
<li>Reconfigured the <code>data</code> argument in <code><a href="../reference/margins.html">margins()</a></code> and <code>prediction()</code> to be clearer about what is happening when it is set to missing.</li>
</ul>
</div>
    <div id="margins-0-2-16" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-16" class="anchor"></a>margins 0.2.16<small> Unreleased </small>
</h1>
<ul>
<li>Switched to using a more reliable “central difference” numerical differentiation and updated the calculation of the step size to follow <code>marfx</code> (<a href='https://github.com/leeper/margins/issues/31'>#31</a>, h/t Jeffrey Arnold)</li>
<li>Added some functionality <code>prediction()</code> methods to, hopefully, reduce memory footprint of model objects. (<a href='https://github.com/leeper/margins/issues/26'>#26</a>)</li>
<li>Changed the capitalization of the <code>variances</code> field in “margins” objects (to lower case), for consistency.</li>
<li>Fixed some small errors in documentation and improved width of examples.</li>
</ul>
</div>
    <div id="margins-0-2-15" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-15" class="anchor"></a>margins 0.2.15<small> Unreleased </small>
</h1>
<ul>
<li>Expose previously internal <code><a href="../reference/dydx.html">dydx()</a></code> generic and methods to provide variable-specific marginal effects calculations. (<a href='https://github.com/leeper/margins/issues/31'>#31</a>)</li>
<li>Added example dataset from <strong>marfx</strong> package. (<a href='https://github.com/leeper/margins/issues/31'>#31</a>)</li>
</ul>
</div>
    <div id="margins-0-2-13" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-13" class="anchor"></a>margins 0.2.13<small> Unreleased </small>
</h1>
<ul>
<li>Added support for calculating marginal effects of logical terms, treating them as factors. (<a href='https://github.com/leeper/margins/issues/31'>#31</a>)</li>
</ul>
</div>
    <div id="margins-0-2-12" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-12" class="anchor"></a>margins 0.2.12<small> Unreleased </small>
</h1>
<ul>
<li>Added an <code>image()</code> method for “lm”, “glm”, and “loess” objects, as a flat complement to existing <code>persp()</code> methods. (<a href='https://github.com/leeper/margins/issues/42'>#42</a>)</li>
</ul>
</div>
    <div id="margins-0-2-11" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-11" class="anchor"></a>margins 0.2.11<small> Unreleased </small>
</h1>
<ul>
<li>Added a <code>prediction()</code> method for “gls” objects (from <code>MASS::gls()</code>). (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
</ul>
</div>
    <div id="margins-0-2-10" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-10" class="anchor"></a>margins 0.2.10<small> Unreleased </small>
</h1>
<ul>
<li>Replaced <code><a href="http://www.rdocumentation.org/packages/numDeriv/topics/jacobian">numDeriv::jacobian()</a></code> with an internal alternative. (<a href='https://github.com/leeper/margins/issues/41'>#41</a>)</li>
</ul>
</div>
    <div id="margins-0-2-8" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-8" class="anchor"></a>margins 0.2.8<small> Unreleased </small>
</h1>
<ul>
<li>Added a <code>prediction()</code> method for “ivreg” objects (from <code><a href="http://www.rdocumentation.org/packages/AER/topics/ivreg">AER::ivreg()</a></code>). (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
<li>Added a <code>prediction()</code> method for “survreg” objects (from <code><a href="http://www.rdocumentation.org/packages/survival/topics/survreg">survival::survreg()</a></code>). (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
</ul>
</div>
    <div id="margins-0-2-7" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-7" class="anchor"></a>margins 0.2.7<small> Unreleased </small>
</h1>
<ul>
<li>Added a <code>prediction()</code> method for “polr” objects (from <code><a href="http://www.rdocumentation.org/packages/MASS/topics/polr">MASS::polr()</a></code>). (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
<li>Added a <code>prediction()</code> method for “coxph” objects (from <code><a href="http://www.rdocumentation.org/packages/survival/topics/coxph">survival::coxph()</a></code>). (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
</ul>
</div>
    <div id="margins-0-2-7-1" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-7-1" class="anchor"></a>margins 0.2.7<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> and <code>prediction()</code> are now S3 generics, with methods for “lm” and “glm” objects, improving extensability. (<a href='https://github.com/leeper/margins/issues/39'>#39</a>, <a href='https://github.com/leeper/margins/issues/40'>#40</a>)</li>
<li>
<code>prediction()</code> returns a new class (“prediction”) and gains a <code>print()</code> method.</li>
<li>Added preliminary support for “loess” objects, including methods for <code>prediction()</code>, <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code>, <code><a href="../reference/cplot.html">cplot()</a></code>, and <code>persp()</code>. No effect variances are currently calculated. (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
<li>Added a <code>prediction()</code> method for “nls” objects. (<a href='https://github.com/leeper/margins/issues/3'>#3</a>)</li>
<li>Internal function <code>get_effect_variances()</code> gains a “none” option for the <code>vce</code> argument, to skip calculation of ME variances.</li>
</ul>
</div>
    <div id="margins-0-2-7-2" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-7-2" class="anchor"></a>margins 0.2.7<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> issues a warning (rather than fails) when trying to extract the marginal effect of a factor variable that was coerced to numeric in a model formula via <code>I()</code>. (<a href='https://github.com/leeper/margins/issues/38'>#38</a>)</li>
</ul>
</div>
    <div id="margins-0-2-5" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-5" class="anchor"></a>margins 0.2.5<small> Unreleased </small>
</h1>
<ul>
<li>Added better support for factor <code>x</code> variables in <code><a href="../reference/cplot.html">cplot()</a></code>.</li>
<li>Added (rudimentary) tests of variance methods. (<a href='https://github.com/leeper/margins/issues/21'>#21</a>)</li>
<li>Removed <code>.build_predict_fun()</code> factory function, as it was no longer needed.</li>
<li>Fix vignettes so package can be built with them. (<a href='https://github.com/leeper/margins/issues/16'>#16</a>)</li>
</ul>
</div>
    <div id="margins-0-2-4" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-4" class="anchor"></a>margins 0.2.4<small> Unreleased </small>
</h1>
<ul>
<li>Modified <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> to use a vectorized approach to simple numerical differentiation. (<a href='https://github.com/leeper/margins/issues/36'>#36</a>/<a href='https://github.com/leeper/margins/issues/37'>#37</a>, h/t Vincent Arel-Bundock)</li>
<li>Removed <code>margins.plm()</code> method, which didn’t actually work because “plm” does not provide a <code>predict()</code> method.</li>
<li>Updated Stata/R comparison documents included in <code>inst/doc</code>.</li>
<li>Expanded tests of unit-specific variances. (<a href='https://github.com/leeper/margins/issues/21'>#21</a>)</li>
</ul>
</div>
    <div id="margins-0-2-3" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-3" class="anchor"></a>margins 0.2.3<small> Unreleased </small>
</h1>
<ul>
<li>Added a logical argument to enable/disable calculation of unit-specific marginal effect variances and set it to FALSE by default. (<a href='https://github.com/leeper/margins/issues/36'>#36</a>, h/t Vincent Arel-Bundock)</li>
</ul>
</div>
    <div id="margins-0-2-2" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-2" class="anchor"></a>margins 0.2.2<small> Unreleased </small>
</h1>
<ul>
<li>Removed support for “marginal effects at means” (MEMs) and the <code>atmeans</code> argument throughout package. (<a href='https://github.com/leeper/margins/issues/35'>#35</a>)</li>
<li>Renamed the <code>vc</code> argument to <code>vcov</code> for consistency with other packages. (<a href='https://github.com/leeper/margins/issues/34'>#34</a>)</li>
</ul>
</div>
    <div id="margins-0-2-1" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-1" class="anchor"></a>margins 0.2.1<small> Unreleased </small>
</h1>
<ul>
<li>
<code>build_margins()</code> now returns columns containing unit-specific standard errors of marginal effects.</li>
<li>Added a <code>vc</code> argument to <code>build_margins()</code> to allow the passing of arbitrary variance-covariance matrices. (<a href='https://github.com/leeper/margins/issues/16'>#16</a>, h/t Alex Coppock &amp; Gijs Schumacher)</li>
<li>
<code><a href="../reference/cplot.html">cplot()</a></code> now draws confidence intervals for “effect” plots.</li>
<li>Fixed a bug in <code>get_marginal_effects()</code> wherein the <code>method</code> argument was ignored. This improves performance significantly when using <code>method = "simple"</code> (the default differentiation method).</li>
</ul>
</div>
    <div id="margins-0-2-0" class="section level1">
<h1 class="page-header">
<a href="#margins-0-2-0" class="anchor"></a>margins 0.2.0<small> Unreleased </small>
</h1>
<ul>
<li>Added <code>persp()</code> methods for “lm” and “glm” class objects to display 3-dimensional representations of predicted values and marginal effects.</li>
<li>Added <code><a href="../reference/plot.margins.html">plot.margins()</a></code> method for mimicking Stata’s <code>marginsplot</code> behavior.</li>
<li>Added <code><a href="../reference/cplot.html">cplot()</a></code> generic and methods for “lm” and “glm” class objects to display conditional predictions and conditional marginal effects in the style of the <strong>interplot</strong> and <strong>plotMElm</strong> packages.</li>
<li>Added various variance estimation procedures for marginal effects: delta method (the default), bootstrap, and simulation (ala <strong>Clarify</strong>).</li>
<li>Fixed estimation of marginal effect variances for generalized linear models, so that they are correct on both “link” and “response” scales.</li>
<li>Exposed two internal marginal effect estimation functions. First, <code>build_margins()</code> is called by <code><a href="../reference/margins.html">margins()</a></code> methods (perhaps repeatedly) and actually assembles a “margins” object from a model and data. It is never necessary to call this directly, but may be useful for very simple marginal effect estimation procedures (i.e., using original data with no <code>at</code> specification). Second, <code><a href="../reference/marginal_effects.html">marginal_effects()</a></code> is the very low level function that differentiates a model with respect to some input data (or calculate discrete changes in the outcome with respect to factor variables). This is the fastest way to obtain marginal effects without the overhead of creating a “margins” object (for which variance estimation is fairly time-consuming).</li>
<li>Implemented estimation of “discrete change” representations of marginal effects of factor variables in models, ala Stata’s default settings.</li>
<li>Re-implemented marginal effects estimation using numeric derivatives provided by <code><a href="http://www.rdocumentation.org/packages/numDeriv/topics/grad">numDeriv::grad()</a></code> rather than symbolic differentiation. This allows <code><a href="../reference/margins.html">margins()</a></code> to handle almost any model that can be specified in R, including models that cannot be specified in Stata.</li>
<li>Used <strong>compiler</strong> to byte compile prediction and gradient fucntions, thereby improving estimation speed.</li>
<li>The internal <code>build_datalist()</code> now checks for specification of illegal factor levels in <code>at</code> and errors when these are encountered.</li>
<li>Use the <strong>webuse</strong> package to handle examples.</li>
</ul>
</div>
    <div id="margins-0-1-0" class="section level1">
<h1 class="page-header">
<a href="#margins-0-1-0" class="anchor"></a>margins 0.1.0<small> Unreleased </small>
</h1>
<ul>
<li>Initial package released.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#margins-0-3-23">0.3.23</a></li>
        <li><a href="#margins-0-3-22">0.3.22</a></li>
        <li><a href="#margins-0-3-21">0.3.21</a></li>
        <li><a href="#margins-0-3-20">0.3.20</a></li>
        <li><a href="#margins-0-3-19">0.3.19</a></li>
        <li><a href="#margins-0-3-18">0.3.18</a></li>
        <li><a href="#margins-0-3-17">0.3.17</a></li>
        <li><a href="#margins-0-3-16">0.3.16</a></li>
        <li><a href="#margins-0-3-15">0.3.15</a></li>
        <li><a href="#margins-0-3-14">0.3.14</a></li>
        <li><a href="#margins-0-3-13">0.3.13</a></li>
        <li><a href="#margins-0-3-12">0.3.12</a></li>
        <li><a href="#margins-0-3-11">0.3.11</a></li>
        <li><a href="#margins-0-3-10">0.3.10</a></li>
        <li><a href="#margins-0-3-9">0.3.9</a></li>
        <li><a href="#margins-0-3-8">0.3.8</a></li>
        <li><a href="#margins-0-3-7">0.3.7</a></li>
        <li><a href="#margins-0-3-6">0.3.6</a></li>
        <li><a href="#margins-0-3-5">0.3.5</a></li>
        <li><a href="#margins-0-3-4">0.3.4</a></li>
        <li><a href="#margins-0-3-3">0.3.3</a></li>
        <li><a href="#margins-0-3-2">0.3.2</a></li>
        <li><a href="#margins-0-3-1">0.3.1</a></li>
        <li><a href="#margins-0-3-0">0.3.0</a></li>
        <li><a href="#margins-0-2-26">0.2.26</a></li>
        <li><a href="#margins-0-2-25">0.2.25</a></li>
        <li><a href="#margins-0-2-24">0.2.24</a></li>
        <li><a href="#margins-0-2-23">0.2.23</a></li>
        <li><a href="#margins-0-2-20">0.2.20</a></li>
        <li><a href="#margins-0-2-20-1">0.2.20</a></li>
        <li><a href="#margins-0-2-20-2">0.2.20</a></li>
        <li><a href="#margins-0-2-19">0.2.19</a></li>
        <li><a href="#margins-0-2-18">0.2.18</a></li>
        <li><a href="#margins-0-2-17">0.2.17</a></li>
        <li><a href="#margins-0-2-16">0.2.16</a></li>
        <li><a href="#margins-0-2-15">0.2.15</a></li>
        <li><a href="#margins-0-2-13">0.2.13</a></li>
        <li><a href="#margins-0-2-12">0.2.12</a></li>
        <li><a href="#margins-0-2-11">0.2.11</a></li>
        <li><a href="#margins-0-2-10">0.2.10</a></li>
        <li><a href="#margins-0-2-8">0.2.8</a></li>
        <li><a href="#margins-0-2-7">0.2.7</a></li>
        <li><a href="#margins-0-2-7-1">0.2.7</a></li>
        <li><a href="#margins-0-2-7-2">0.2.7</a></li>
        <li><a href="#margins-0-2-5">0.2.5</a></li>
        <li><a href="#margins-0-2-4">0.2.4</a></li>
        <li><a href="#margins-0-2-3">0.2.3</a></li>
        <li><a href="#margins-0-2-2">0.2.2</a></li>
        <li><a href="#margins-0-2-1">0.2.1</a></li>
        <li><a href="#margins-0-2-0">0.2.0</a></li>
        <li><a href="#margins-0-1-0">0.1.0</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thomas J. Leeper.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

